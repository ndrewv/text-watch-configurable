<!DOCTYPE html>
<html>
<head>
	<title>Text Time</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="css/themes/pebble-light.min.css" />
  	<link rel="stylesheet" href="css/themes/jquery.mobile.icons.min.css" />
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile.structure-1.4.5.min.css" />
	<link rel="stylesheet" href="colorpicker/jquery.simplecolorpicker.css">
	<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
</head>
<body>
	<form name="form" name="form" method="GET">
		<div data-theme="a" data-role="page">
			<div data-role="header" class="jqm-header">
				<h1>Text Time</h1>
			</div>
			<div id="textDiv"></div>
			<div data-role="content">
			<div data-role="fieldcontain">		
				<label for="background">Background:</label>
				<select name="background" id="background">
					<option value="192">Black</option>
					<option value="255">White</option>
				</select>
			</div>
			<div data-role="fieldcontain">
			<label for="colorpicker">ColorPicker:</label>
			<select name="colorpicker" id="colorpicker" data-role="none">
			  <option value="#000000" data="192">Black</option>
			  <option value="#000055" data="193">Oxford Blue</option>
			  <option value="#0000aa" data="194">Duke Blue</option>
			  <option value="#0000ff" data="195">Blue</option>
			  <option value="#005500" data="196">Dark Green</option>
			  <option value="#005555" data="197">Midnight Green</option>
			  <option value="#0055aa" data="198">Cobalt Blue</option>
			  <option value="#0055ff" data="199">Blue Moon</option>
			  <option value="#00aa00" data="200">Islamic Green</option>
			  <option value="#00aa55" data="201">Jaeger Green</option>
			  <option value="#00aaaa" data="202">Tiffany Blue</option>
			  <option value="#00aaff" data="203">Vivid Cerulean</option>
			  <option value="#00ff00" data="204">Green</option>
			  <option value="#00ff55" data="205">Malachite</option>
			  <option value="#00ffaa" data="206">Spring Green</option>
			  <option value="#00ffff" data="207">Cyan</option>
			  <option value="#550000" data="208">Bulgarian Rose</option>
			  <option value="#550055" data="209">Imperial Purple</option>
			  <option value="#5500aa" data="210">Indigo</option>
			  <option value="#5500ff" data="211">Electric Ultramarine</option>
			  <option value="#555500" data="212">Army Green</option>
			  <option value="#555555" data="213">Dark Gray</option>
			  <option value="#5555aa" data="214">Liberty</option>
			  <option value="#5555ff" data="215">Light Blue</option>
			  <option value="#55aa00" data="216">Kelly Green</option>
			  <option value="#55aa55" data="217">May Green</option>
			  <option value="#55aaaa" data="218">Cadet Blue</option>
			  <option value="#55aaff" data="219">Picton Blue</option>
			  <option value="#55ff00" data="220">Bright Green</option>
			  <option value="#55ff55" data="221">Screamin Green</option>
			  <option value="#55ffaa" data="222">Medium Aquamarine</option>
			  <option value="#55ffff" data="223">Electric Blue</option>
			  <option value="#aa0000" data="224">Candy Apple Red</option>
			  <option value="#aa0055" data="225">Jazz Berry Jam</option>
			  <option value="#aa00aa" data="226">Purple</option>
			  <option value="#aa00ff" data="227">vivid Violet</option>
			  <option value="#aa5500" data="228">Windsor Tan</option>
			  <option value="#aa5555" data="229">Rose Vale</option>
			  <option value="#aa55aa" data="230">Purpureus</option>
			  <option value="#aa55ff" data="231">Lavender Indigo</option>
			  <option value="#aaaa00" data="232">Limerick</option>
			  <option value="#aaaa55" data="233">Brass</option>
			  <option value="#aaaaaa" data="234">Light Gray</option>
			  <option value="#aaaaff" data="235">Baby Blue</option>
			  <option value="#aaff00" data="236">Spring Bud</option>
			  <option value="#aaff55" data="237">Inchworm</option>
			  <option value="#aaffaa" data="238">Mint Green</option>
			  <option value="#aaffff" data="239">Celeste</option>
			  <option value="#ff0000" data="240">Red</option>
			  <option value="#ff0055" data="241">Folly</option>
			  <option value="#ff00aa" data="242">Fashion Magenta</option>
			  <option value="#ff00ff" data="243">Magenta</option>
			  <option value="#ff5500" data="244">Orange</option>
			  <option value="#ff5555" data="245">Sunset Orange</option>
			  <option value="#ff55aa" data="246">Brilliant Rose</option>
			  <option value="#ff55ff" data="247">Shocking Pink</option>
			  <option value="#ffaa00" data="248">Chrome Yellow</option>
			  <option value="#ffaa55" data="249">Rajah</option>
			  <option value="#ffaaaa" data="250">Melon</option>
			  <option value="#ffaaff" data="251">Rich Lavender</option>
			  <option value="#ffff00" data="252">Yellow</option>
			  <option value="#ffff55" data="253">Icterine</option>
			  <option value="#ffffaa" data="254">Pastel Yellow</option>
			  <option value="#ffffff" data="255">White</option>
			</select>
			</div>
			<div data-role="fieldcontain">
				<label for="foreground">Foreground:</label>
				<select name="foreground" id="foreground">
					<option value="192" style="background-color:#FFFFFF">Black</option>
					<option value="255" style="background-color:#000000">White</option>
				</select>
			</div>
			<div data-role="fieldcontain">
				<label for="align">Alignment:</label>
				<fieldset data-role="controlgroup"  name="align" data-type="horizontal">
					<input type="radio" name="align" id="align_1" value="0"/>
					<label for="align_1">Left</label>
					<input type="radio" name="align" id="align_2" value="1"/>
					<label for="align_2">Centre</label>
					<input type="radio" name="align" id="align_3" value="2"/>
					<label for="align_3">Right</label>
				</fieldset>
			</div>
				<div data-role="fieldcontain">
					<label for="datestyle">Date Style:</label>
					<select name="datestyle" id="datestyle">
						<option value="0">Month</option>
						<option value="1">Weekday</option>
						<option value="2">No Date</option>
					</select>
				</div>
				<div data-role="fieldcontain">
					<label for="capital">Capitalize Month/Weekday:</label>
					<fieldset data-role="controlgroup"  name="capital" data-type="horizontal">
						<input type="radio" name="capital" id="capital_1" value="0"/>
						<label for="capital_1">Yes</label>
						<input type="radio" name="capital" id="capital_2" value="1"/>
						<label for="capital_2">No</label>
					</fieldset>
				</div>
				<div data-role="fieldcontain">
					<label for="fontstyle">Font Style:</label>
					<select name="fontstyle" id="fontstyle">
						<option value="0" class="bitham">Bitham (Default)</option>
						<option value="1" class="daniel">Daniel</option>
						<option value="2" class="fineliner">Fineliner</option>
						<option value="3" class="philosopher">Philosopher</option>
						<option value="4" class="retro">Retro</option>
						<option value="5" class="jedi">Star Jedi</option>
						<option value="6" class="stencilia">Stencilia</option>
						<option value="7" class="technique">Technique BRK</option>
						<option value="8" class="visitor">Visitor</option>
						<option value="9" class="florence">Florence Sans</option>
						<option value="10" class="quicksand">Quicksand</option>
						<option value="11" class="college">College</option>
						<option value="12" class="lcd">LCD</option>
						<option value="13" class="archistico">Archistico</option>
						<option value="14" class="eurofurence">Eurofurence</option>
					</select>
				</div>
				<div data-theme="a" data-role="fieldcontain">
					<label for="vertoffset">Vertical Offset (px):</label>
					<select name="vertoffset" id="vertoffset">
						<option value="0">0 (Default)</option>
						<option value="5">5</option>
						<option value="10">10</option>
						<option value="15">15</option>
						<option value="19">19 (1/2 line)</option>
						<option value="25">25</option>
						<option value="30">30</option>
						<option value="38">38 (1 line)</option>
					</select>
				</div>
				<div data-role="fieldcontain">
					<label for="animation">Animation Speed:</label>
					<select name="animation" id="animation">
						<option value="700">Default</option>
						<option value="1000">Slow</option>
						<option value="500">Fast</option>
						<option value="0">None</option>
					</select>
				</div>
					<fieldset class="ui-grid-a">
					<div class="ui-block-a"><button data-theme="b" id="cancel" onclick="return cancelForm();">Cancel</button></div>
					<div class="ui-block-b"><button data-theme="b" id="submit" onclick="return submitForm();">Submit</button></div>
					</fieldset>
			</div>
		</div>
	</form>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.js"></script>
    <script src="colorpicker/jquery.simplecolorpicker.js"></script>
	<script>
	$(document).ready(function() {
     $('select[name="colorpicker"]').simplecolorpicker({picker: true});
    });
	
		function getQueryParam(variable, default_) {
		    var query = window.location.search.substring(1);
		    var vars = query.split('&');
		    for (var i = 0; i < vars.length; i++) {
		        var pair = vars[i].split('=');
		        if (pair[0] == variable)
		            return decodeURIComponent(pair[1]);
		    }
		    return default_ || false;
		}
		
		function submitForm(){
		var variables = {};
		var selects=this.form.getElementsByTagName('select');
		//encode selects
		for(var i=0;i<selects.length;i++){
			variables[selects[i].name.toString()]=parseInt(selects[i].value);
		}
		var radios=this.form.getElementsByTagName('input');
		for(var j=0;j<radios.length;j++){
			if(radios[j].checked == true){
				variables[radios[j].name.toString()]=parseInt(radios[j].value);	
			}
		}
	        var location = return_to+encodeURIComponent(JSON.stringify(variables));
            	document.location = location;
		}
		function cancelForm(){
  		document.location = return_to;
		}
		
		var return_to = getQueryParam('return_to', 'pebblejs://close#');
		var config = getQueryParam('opts', '');
		document.getElementById("textDiv").innerHTML = window.location.search.substr(1);
		var obj = JSON.parse(config);
		if(obj!==null){
			for (var key in obj){
  				if(obj.hasOwnProperty(key)){
					var element=document.getElementsByName(key);
					if (element!==null) {
					var len = element.length;
						switch(element.length){
							case 0:
							break;
							case 1:{
								element[0].value=parseInt(obj[key]);
								}break;
							default:{
								for(var i = 0; i < element.length; i++){
									if(element[i].value == parseInt(obj[key])){
										element[i].checked = true;
										break;
									}
								}
							}							
						}
					}
				}
			}
		}
	</script>
</body>
</html>

